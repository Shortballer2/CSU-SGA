
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Submit Idea</title>
<link href="/css/styles.css" rel="stylesheet"/>
<script src="/js/main.js"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&amp;display=swap" rel="stylesheet"/>
<link href="/Favicon.ico" rel="icon" type="image/png"/></head>
</head>
<body>
<header>
<h1>Submit Idea</h1>
<nav>
<a href="/">Home</a>
<a href="/About/">About</a>
<a href="/Events/">Events</a>
<a href="/Idea/">Submit Idea</a>
<a href="/Media/">Media</a>
<a href="/Contact/">Contact</a>
</nav>
</header>
<main>
<h2>Share your idea or feedback</h2>
<form id="idea-form" action="" onsubmit="return false;">
<label for="followup-choice">Submission Type</label>
<select name="followup" id="followup-choice" onchange="toggleFollowUpFields()" required>
<option value="anonymous">Anonymous</option>
<option value="followup">Follow-up</option>
</select>

<div id="optional-fields" style="display:none;">
<label for="name">Name (optional)</label>
<input type="text" id="name" name="name" placeholder="Your name">

<label for="email">Email (optional)</label>
<input type="email" id="email" name="email" placeholder="you@example.com">
</div>

<label for="submission_type">Type of Submission</label>
<select name="submission_type" required>
<option value="General Feedback">General Feedback</option>
<option value="Legislation Idea">Legislation Idea</option>
</select>

<label for="category">Category</label>
<select name="category" required>
<option value="Campus Life">Campus Life</option>
<option value="Campus Recreation">Campus Recreation</option>
<option value="Residence Life">Residence Life</option>
<option value="Dining Services">Dining Services</option>
<option value="Library">Library</option>
<option value="Counseling">Counseling</option>
<option value="Other">Other</option>
</select>

<label for="description">Detailed Description of Idea or Feedback</label>
<textarea name="description" rows="5" required placeholder="Your answer"></textarea>

<button class="button" type="submit">Submit</button>
</form>
</main>
<footer>
<p>© 2025 Dawson & Mathis Campaign. All rights reserved.</p>
</footer>

<script>
document.getElementById("idea-form").addEventListener("submit", function (e) {
e.preventDefault();
const data = {
followup: document.getElementById("followup-choice").value,
name: document.getElementById("name")?.value || "",
email: document.getElementById("email")?.value || "",
submission_type: document.querySelector("select[name='submission_type']").value,
category: document.querySelector("select[name='category']").value,
description: document.querySelector("textarea[name='description']").value
};

fetch("https://campaign-backend-oixn.onrender.com/submit", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify(data)
})
.then(res => res.json())
.then(data => {
alert("✅ Submitted: " + data.message);
})
.catch(err => {
alert("❌ Error: " + err.message);
});
});

function toggleFollowUpFields() {
const choice = document.getElementById("followup-choice").value;
document.getElementById("optional-fields").style.display = (choice === "followup") ? "block" : "none";
}
</script>
</body>
</html>
